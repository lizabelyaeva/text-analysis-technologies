# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ2: –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–≤–∞—Ä–∏–∞–Ω—Ç 2)

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–∞–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ—à–µ–Ω–∏—è —Ç—Ä—ë—Ö —É—á–µ–±–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π, –ø–æ—Å–≤—è—â—ë–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–µ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, XML-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏, API-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏-–∏-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
3. [–ó–∞–¥–∞–Ω–∏–µ 1: XML-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#–∑–∞–¥–∞–Ω–∏–µ-1-xml-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
   - [1.1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ XML-—Ñ–æ—Ä–º–∞—Ç–∞](#11-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞-xml-—Ñ–æ—Ä–º–∞—Ç–∞)
   - [1.2. XPath-–∑–∞–ø—Ä–æ—Å—ã](#12-xpath-–∑–∞–ø—Ä–æ—Å—ã)
   - [1.3. DTD-—Å—Ö–µ–º–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è](#13-dtd-—Å—Ö–µ–º–∞-–∏-–≤–∞–ª–∏–¥–∞—Ü–∏—è)
   - [1.4. XML Schema (XSD) –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è](#14-xml-schema-xsd-–∏-–≤–∞–ª–∏–¥–∞—Ü–∏—è)
   - [1.5-1.7. XSLT-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è](#15-17-xslt-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)
   - [1.8. JSON Schema –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è](#18-json-schema-–∏-–≤–∞–ª–∏–¥–∞—Ü–∏—è)
   - [1.9. JSONPath-–∑–∞–ø—Ä–æ—Å—ã](#19-jsonpath-–∑–∞–ø—Ä–æ—Å—ã)
   - [1.10. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ Python](#110-–ø—Ä–æ–≥—Ä–∞–º–º–∞-–Ω–∞-python)
4. [–ó–∞–¥–∞–Ω–∏–µ 2: HeadHunter API](#–∑–∞–¥–∞–Ω–∏–µ-2-headhunter-api)
   - [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–µ—à–µ–Ω–∏—è)
   - [–ó–∞–¥–∞—á–∞ a: –ü–æ–∏—Å–∫ –∏ —Ä–∞—Å—á—ë—Ç —Å—Ä–µ–¥–Ω–µ–π –∑–∞—Ä–ø–ª–∞—Ç—ã](#–∑–∞–¥–∞—á–∞-a-–ø–æ–∏—Å–∫-–∏-—Ä–∞—Å—á—ë—Ç-—Å—Ä–µ–¥–Ω–µ–π-–∑–∞—Ä–ø–ª–∞—Ç—ã)
   - [–ó–∞–¥–∞—á–∞ b: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç –ø–æ –≥–æ—Ä–æ–¥–∞–º](#–∑–∞–¥–∞—á–∞-b-—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-–∑–∞—Ä–ø–ª–∞—Ç-–ø–æ-–≥–æ—Ä–æ–¥–∞–º)
   - [–ó–∞–¥–∞—á–∞ c: N-–≥—Ä–∞–º–º—ã –∏ —á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å](#–∑–∞–¥–∞—á–∞-c-n-–≥—Ä–∞–º–º—ã-–∏-—á–∞—Å—Ç–æ—Ç–Ω—ã–π-—Å–ª–æ–≤–∞—Ä—å)
5. [–ó–∞–¥–∞–Ω–∏–µ 3: OpenXML –¥–æ–∫—É–º–µ–Ω—Ç—ã](#–∑–∞–¥–∞–Ω–∏–µ-3-openxml-–¥–æ–∫—É–º–µ–Ω—Ç—ã)
   - [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–µ—à–µ–Ω–∏—è-1)
   - [–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã](#–ª–æ–≥–∏–∫–∞-—Ä–∞–±–æ—Ç—ã)
   - [–ó–∞–ø–æ–ª–Ω—è–µ–º—ã–µ –ø–æ–ª—è](#–∑–∞–ø–æ–ª–Ω—è–µ–º—ã–µ-–ø–æ–ª—è)
6. [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É](#–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏-–ø–æ-–∑–∞–ø—É—Å–∫—É)
7. [–í—ã–≤–æ–¥—ã](#–≤—ã–≤–æ–¥—ã)

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **XML/XPath/XSLT**: lxml, etree
- **DTD/XSD –≤–∞–ª–∏–¥–∞—Ü–∏—è**: lxml.etree
- **JSON/JSONPath**: json, jsonpath-ng, jsonschema
- **API-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: requests
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞**: BeautifulSoup4, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- **OpenXML**: zipfile, lxml –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å docx
- **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è**: Python 3.x

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
Lab2/
‚îÇ
‚îú‚îÄ‚îÄ README.md                         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îÇ
‚îú‚îÄ‚îÄ –ó–∞–¥–∞–Ω–∏–µ 1 (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
‚îÇ   ‚îú‚îÄ‚îÄ albums.xml                    # –û—Å–Ω–æ–≤–Ω–æ–π XML-—Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ albums.dtd                    # DTD-—Å—Ö–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ albums.xsd                    # XML Schema
‚îÇ   ‚îú‚îÄ‚îÄ albums.schema.json            # JSON Schema
‚îÇ   ‚îú‚îÄ‚îÄ xslt/                         # XSLT-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ to_text.xslt
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ to_html.xslt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ to_json.xslt
‚îÇ   ‚îú‚îÄ‚îÄ scripts/                      # Python-—Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py                   # –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ run_xpaths.py             # XPath-–∑–∞–ø—Ä–æ—Å—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ jsonpath_queries.py       # JSONPath-–∑–∞–ø—Ä–æ—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ validate_dtd.py               # –í–∞–ª–∏–¥–∞—Ü–∏—è DTD
‚îÇ   ‚îú‚îÄ‚îÄ validate_xsd.py               # –í–∞–ª–∏–¥–∞—Ü–∏—è XSD
‚îÇ   ‚îú‚îÄ‚îÄ validate_json.py              # –í–∞–ª–∏–¥–∞—Ü–∏—è JSON
‚îÇ   ‚îî‚îÄ‚îÄ out/                          # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ albums.txt
‚îÇ       ‚îú‚îÄ‚îÄ albums.html
‚îÇ       ‚îî‚îÄ‚îÄ albums.json
‚îÇ
‚îú‚îÄ‚îÄ task2/                            # –ó–∞–¥–∞–Ω–∏–µ 2: HeadHunter API
‚îÇ   ‚îú‚îÄ‚îÄ main.py                       # –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
‚îÇ   ‚îî‚îÄ‚îÄ ngrams.py                     # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ N-–≥—Ä–∞–º–º
‚îÇ
‚îî‚îÄ‚îÄ task3/                            # –ó–∞–¥–∞–Ω–∏–µ 3: OpenXML
    ‚îî‚îÄ‚îÄ fill_openxml_by_context.py    # –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```

---

## –ó–∞–¥–∞–Ω–∏–µ 1: XML-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### 1.1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ XML-—Ñ–æ—Ä–º–∞—Ç–∞

**–û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω XML-—Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –∞–ª—å–±–æ–º–∞—Ö. –§–æ—Ä–º–∞—Ç –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
- –ù–∞–∑–≤–∞–Ω–∏–µ –∞–ª—å–±–æ–º–∞
- –°–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
- –ñ–∞–Ω—Ä—ã
- –î–∞—Ç–∞ –≤—ã–ø—É—Å–∫–∞
- –í–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ä–µ–π—Ç–∏–Ω–≥
- –°–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫–æ–≤ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [`albums.xml`](./albums.xml) ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π XML-–¥–æ–∫—É–º–µ–Ω—Ç —Å –¥–∞–Ω–Ω—ã–º–∏

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- XML 1.0
- –ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8

**–ü—Ä–∏–º–µ—Ä XML-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<albums xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="albums.xsd">
    <album>
        <title>Born to Die</title>
        <artists>
            <artist>Lana Del Rey</artist>
        </artists>
        <genres>
            <genre>Indie Pop</genre>
            <genre>Baroque Pop</genre>
        </genres>
        <releaseDate>2012-01-27</releaseDate>
        <ageLimit>16+</ageLimit>
        <tracks>
            <track>
                <title>Born to Die</title>
                <duration>4:46</duration>
            </track>
        </tracks>
    </album>
</albums>
```

---

### 1.2. XPath-–∑–∞–ø—Ä–æ—Å—ã

**–û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã XPath-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ XML-–¥–æ–∫—É–º–µ–Ω—Ç–∞. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è:
- –ü–æ–∏—Å–∫–∞ –∞–ª—å–±–æ–º–æ–≤ –ø–æ –∂–∞–Ω—Ä—É
- –ü–æ–ª—É—á–µ–Ω–∏—è –∂–∞–Ω—Ä–æ–≤ –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é
- –ü–æ–∏—Å–∫–∞ –∞–ª—å–±–æ–º–æ–≤ —Å —Ç—Ä–µ–∫–∞–º–∏ –¥–ª–∏–Ω–Ω–µ–µ 5 –º–∏–Ω—É—Ç
- –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø–ª–µ–π–ª–∏—Å—Ç–∞
- –ü–æ–¥—Å—á—ë—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∂–∞–Ω—Ä–æ–≤ –∏ —Ç—Ä–µ–∫–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–ª—å–±–æ–º–∞

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [`scripts/run_xpaths.py`](./scripts/run_xpaths.py) ‚Äî —Å–∫—Ä–∏–ø—Ç —Å XPath-–∑–∞–ø—Ä–æ—Å–∞–º–∏

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- XPath 1.0
- Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ lxml

**–ü—Ä–∏–º–µ—Ä—ã XPath-–∑–∞–ø—Ä–æ—Å–æ–≤:**

```python
# –ê–ª—å–±–æ–º—ã –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∂–∞–Ω—Ä–∞
expr = '//album[genres/genre = "Alternative Rock"]/title/text()'

# –ñ–∞–Ω—Ä—ã –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
expr = '//album[artists/artist = "Radiohead"]/genres/genre/text()'

# –í—Å–µ –∞–ª—å–±–æ–º—ã
albums = tree.xpath('//album')

# –ü–æ–¥—Å—á—ë—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤
genre_count = a.xpath('count(genres/genre)')
track_count = a.xpath('count(tracks/track)')
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

```
(a) –ê–ª—å–±–æ–º—ã –∂–∞–Ω—Ä–∞ 'Alternative Rock':
 - AM
 - OK Computer
 - The Black Parade

(b) –ñ–∞–Ω—Ä—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞–±–æ—Ç–∞–ª –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å 'Radiohead':
 - Alternative Rock
 - Art Rock

(c) –ê–ª—å–±–æ–º—ã —Å —Ç—Ä–µ–∫–∞–º–∏ –¥–ª–∏–Ω–Ω–µ–µ 5 –º–∏–Ω—É—Ç:
 - OK Computer
 - The Black Parade
```

–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: —Å–º. [`scripts/run_xpaths.py`](./scripts/run_xpaths.py)

---

### 1.3. DTD-—Å—Ö–µ–º–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ DTD-—Å—Ö–µ–º–∞ (Document Type Definition) –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã XML-–¥–æ–∫—É–º–µ–Ω—Ç–∞. –°—Ö–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –∏—Ö –ø–æ—Ä—è–¥–æ–∫ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ.

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [`albums.dtd`](./albums.dtd) ‚Äî DTD-—Å—Ö–µ–º–∞
- [`validate_dtd.py`](./validate_dtd.py) ‚Äî —Å–∫—Ä–∏–ø—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- DTD (Document Type Definition)
- lxml.etree.DTD –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä DTD-—Å—Ö–µ–º—ã:**

```dtd
<!ELEMENT albums (album+)>
<!ELEMENT album (title, artists, genres, releaseDate, ageLimit, tracks)>
<!ELEMENT title (#PCDATA)>
<!ELEMENT artists (artist+)>
<!ELEMENT artist (#PCDATA)>
<!ELEMENT genres (genre+)>
<!ELEMENT genre (#PCDATA)>
<!ELEMENT releaseDate (#PCDATA)>
<!ELEMENT ageLimit (#PCDATA)>
<!ELEMENT tracks (track+)>
<!ELEMENT track (title, duration)>
<!ELEMENT duration (#PCDATA)>
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è DTD –∫ XML –Ω—É–∂–Ω–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É:
```xml
<!DOCTYPE albums SYSTEM "albums.dtd">
```

–ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (—Å–º. [`validate_dtd.py`](./validate_dtd.py)):

```python
from lxml import etree

with open("albums.dtd") as f:
    dtd = etree.DTD(f)

tree = etree.parse("albums.xml")

if dtd.validate(tree):
    print("XML –≤–∞–ª–∏–¥–µ–Ω")
else:
    print("XML –Ω–µ –≤–∞–ª–∏–¥–µ–Ω")
    print(dtd.error_log)
```

---

### 1.4. XML Schema (XSD) –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ XML Schema (XSD) –¥–ª—è –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ XML-–¥–æ–∫—É–º–µ–Ω—Ç–∞. XSD-—Å—Ö–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å DTD: —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω.

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [`albums.xsd`](./albums.xsd) ‚Äî XML Schema
- [`validate_xsd.py`](./validate_xsd.py) ‚Äî —Å–∫—Ä–∏–ø—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- XML Schema 1.0
- lxml.etree.XMLSchema –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä XSD-—Å—Ö–µ–º—ã:**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="albums">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="album" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="title" type="xs:string"/>
                            <xs:element name="artists">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="artist" type="xs:string" maxOccurs="unbounded"/>
                                    </xs:sequence>
                                </xs:complexType>
                            </xs:element>
                            <xs:element name="releaseDate" type="xs:date"/>
                            <!-- ... -->
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema>
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

XML-—Ñ–∞–π–ª –ø–æ–¥–∫–ª—é—á–∞–µ—Ç XSD-—Å—Ö–µ–º—É:
```xml
<albums xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="albums.xsd">
```

–ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (—Å–º. [`validate_xsd.py`](./validate_xsd.py)):

```python
from lxml import etree

xml_doc = etree.parse("albums.xml")
xsd_doc = etree.parse("albums.xsd")
schema = etree.XMLSchema(xsd_doc)

if schema.validate(xml_doc):
    print("XML —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç XSD")
else:
    print("XML –ù–ï —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç XSD")
    print(schema.error_log)
```

---

### 1.5-1.7. XSLT-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

**–û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã —Ç—Ä–∏ XSLT-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ XML –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
1. **XML ‚Üí TXT**: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
2. **XML ‚Üí HTML**: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ HTML-—Ç–∞–±–ª–∏—Ü—É —Å —Å—Ç–∏–ª—è–º–∏
3. **XML ‚Üí JSON**: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ JSON-–º–∞—Å—Å–∏–≤

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [`xslt/to_text.xslt`](./xslt/to_text.xslt) ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ TXT
- [`xslt/to_html.xslt`](./xslt/to_html.xslt) ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ HTML
- [`xslt/to_json.xslt`](./xslt/to_json.xslt) ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ JSON
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ [`out/`](./out/):
  - [`out/albums.txt`](./out/albums.txt)
  - [`out/albums.html`](./out/albums.html)
  - [`out/albums.json`](./out/albums.json)

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- XSLT 1.0
- lxml.etree –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä XSLT-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (XML ‚Üí TXT):**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="text" encoding="UTF-8"/>
  
  <xsl:template match="/albums">
    <xsl:text>Albums list
====================
</xsl:text>
    <xsl:for-each select="album">
      <xsl:text>Title: </xsl:text><xsl:value-of select="title"/><xsl:text>&#10;</xsl:text>
      <!-- ... -->
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet>
```

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (TXT):**

```
Albums list
====================
Title: Born to Die
Artists: Lana Del Rey
Genres: Indie Pop, Baroque Pop
Release date: 2012-01-27
Age limit: 16+
Tracks:
  - Born to Die (4:46)
  - Blue Jeans (3:29)
  - Video Games (4:42)
--------------------
```

**HTML-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—ë—Ç HTML-—Ç–∞–±–ª–∏—Ü—É —Å CSS-—Å—Ç–∏–ª—è–º–∏. –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: [`out/albums.html`](./out/albums.html)

**JSON-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:**

–°–æ–∑–¥–∞—ë—Ç JSON-–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤. –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: [`out/albums.json`](./out/albums.json)

---

### 1.8. JSON Schema –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ JSON Schema –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ JSON-—Ñ–∞–π–ª–∞, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –∏–∑ XML —á–µ—Ä–µ–∑ XSLT-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ. –°—Ö–µ–º–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–∞—Å—Å–∏–≤–∞ –∞–ª—å–±–æ–º–æ–≤, —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è.

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [`albums.schema.json`](./albums.schema.json) ‚Äî JSON Schema
- [`validate_json.py`](./validate_json.py) ‚Äî —Å–∫—Ä–∏–ø—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- JSON Schema (Draft 2020-12)
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ jsonschema –¥–ª—è Python

**–ü—Ä–∏–º–µ—Ä JSON Schema:**

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "array",
  "items": {
    "type": "object",
    "required": ["title", "artists", "genres", "releaseDate", "ageLimit", "tracks"],
    "properties": {
      "title": { "type": "string" },
      "artists": { 
        "type": "array",
        "items": { "type": "string" }
      },
      "genres": {
        "type": "array",
        "items": { "type": "string" }
      },
      "releaseDate": { "type": "string", "format": "date" },
      "tracks": {
        "type": "array",
        "items": {
          "type": "object",
          "required": ["title", "duration"],
          "properties": {
            "title": { "type": "string" },
            "duration": { "type": "string" }
          }
        }
      }
    }
  }
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

–ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (—Å–º. [`validate_json.py`](./validate_json.py)):

```python
import json
import jsonschema
from jsonschema import validate

with open("out/albums.json", "r", encoding="utf-8") as f:
    data = json.load(f)

with open("albums.schema.json", "r", encoding="utf-8") as f:
    schema = json.load(f)

try:
    validate(instance=data, schema=schema)
    print("JSON –≤–∞–ª–∏–¥–µ–Ω")
except jsonschema.exceptions.ValidationError as e:
    print("JSON –ù–ï –≤–∞–ª–∏–¥–µ–Ω")
    print(e)
```

---

### 1.9. JSONPath-–∑–∞–ø—Ä–æ—Å—ã

**–û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã JSONPath-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON-—Ñ–∞–π–ª–∞. JSONPath —è–≤–ª—è–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–æ–º XPath –¥–ª—è JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä.

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [`scripts/jsonpath_queries.py`](./scripts/jsonpath_queries.py) ‚Äî —Å–∫—Ä–∏–ø—Ç —Å JSONPath-–∑–∞–ø—Ä–æ—Å–∞–º–∏

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- JSONPath
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ jsonpath-ng –¥–ª—è Python

**–ü—Ä–∏–º–µ—Ä—ã JSONPath-–∑–∞–ø—Ä–æ—Å–æ–≤:**

```python
from jsonpath_ng import parse

# –í—Å–µ –∞–ª—å–±–æ–º—ã
expr = parse("$[*]")

# –í—Å–µ —Ç—Ä–µ–∫–∏
expr = parse("$[*].tracks[*]")

# –ù–∞–∑–≤–∞–Ω–∏—è –∞–ª—å–±–æ–º–æ–≤
albums = [a.value["title"] for a in expr.find(data)]
```

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```python
# –ê–ª—å–±–æ–º—ã –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∂–∞–Ω—Ä–∞
def albums_by_genre(data, genre):
    expr = parse("$[*]")
    return [a.value["title"] for a in expr.find(data) 
            if genre in a.value.get("genres", [])]

# –ñ–∞–Ω—Ä—ã –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
def genres_by_artist(data, artist):
    expr = parse("$[*]")
    genres = set(
        g for album in expr.find(data)
        if artist in album.value.get("artists", [])
        for g in album.value.get("genres", [])
    )
    return sorted(genres)
```

–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä: —Å–º. [`scripts/jsonpath_queries.py`](./scripts/jsonpath_queries.py)

---

### 1.10. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ Python

**–û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã:**

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ Python, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- –ó–∞–≥—Ä—É–∑–∫–∞ XML-—Ñ–∞–π–ª–æ–≤
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ XSLT-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π (XML ‚Üí TXT, HTML, JSON)
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ JSONPath-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ø–æ–ª—É—á–µ–Ω–Ω–æ–º—É JSON

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [`scripts/main.py`](./scripts/main.py) ‚Äî –≥–ª–∞–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Python 3.x
- lxml –¥–ª—è XSLT –∏ XML
- json –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

1. **–ú–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
   - –ó–∞–≥—Ä—É–∑–∫–∞ XML-—Ñ–∞–π–ª–∞
   - XSLT-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
   - JSON-–∑–∞–ø—Ä–æ—Å—ã

2. **XSLT-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ TXT, HTML –∏ JSON
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ø–∞–ø–∫—É `out/`

3. **JSON-–∑–∞–ø—Ä–æ—Å—ã:**
   - –ê–ª—å–±–æ–º—ã –ø–æ –∂–∞–Ω—Ä—É
   - –ñ–∞–Ω—Ä—ã –ø–æ –∞—Ä—Ç–∏—Å—Ç—É
   - –ê–ª—å–±–æ–º—ã —Å —Ç—Ä–µ–∫–∞–º–∏ –¥–ª–∏–Ω–Ω–µ–µ 5 –º–∏–Ω—É—Ç
   - –°–ª—É—á–∞–π–Ω—ã–π –ø–ª–µ–π–ª–∏—Å—Ç

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞:**

```bash
cd scripts
python main.py
```

**–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã:**

```
üéµ –°–ò–°–¢–ï–ú–ê –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ú–£–ó–´–ö–ê–õ–¨–ù–´–ú–ò –ê–õ–¨–ë–û–ú–ê–ú–ò üéµ
==================================================

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
          –ú–ï–ù–Æ –£–ü–†–ê–í–õ–ï–ù–ò–Ø
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 1 - –ó–∞–≥—Ä—É–∑–∏—Ç—å XML —Ñ–∞–π–ª
 2 - XSLT-–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
 3 - JSON-–∑–∞–ø—Ä–æ—Å—ã
 0 - –í—ã—Ö–æ–¥
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

‚û§ –í–∞—à –≤—ã–±–æ—Ä: 1
‚û§ –í–≤–µ–¥–∏—Ç–µ –ø—É—Ç—å –∫ XML —Ñ–∞–π–ª—É: ../albums.xml
‚úì –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω: albums.xml

‚û§ –í–∞—à –≤—ã–±–æ—Ä: 2
‚öô  –í—ã–ø–æ–ª–Ω—è—é –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è...
‚úî –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª: out/albums.txt
‚úî –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª: out/albums.html
‚úî –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª: out/albums.json
```

---

## üîç –ó–∞–¥–∞–Ω–∏–µ 2: HeadHunter API

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

–†–µ—à–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:
- **`main.py`** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π HeadHunter API
- **`ngrams.py`** ‚Äî –º–æ–¥—É–ª—å –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ N-–≥—Ä–∞–º–º

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å HeadHunter API**
   - –ü–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞ (—Ä–µ–≥–∏–æ–Ω, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ)

2. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç —Å —Å–∞–π—Ç–∞ –¶–ë –†–§
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∑–∞—Ä–ø–ª–∞—Ç –≤ —Ä—É–±–ª–∏ –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

3. **–ê–Ω–∞–ª–∏–∑ N-–≥—Ä–∞–º–º**
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –∏–∑ –æ–ø–∏—Å–∞–Ω–∏–π –≤–∞–∫–∞–Ω—Å–∏–π
   - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç–Ω—ã—Ö —Å–ª–æ–≤–∞—Ä–µ–π –¥–ª—è 1-, 2- –∏ 3-–≥—Ä–∞–º–º
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç–æ–ø-—Å–ª–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ CSV

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `requests` –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- BeautifulSoup4 –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML
- `xml.etree.ElementTree` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ XML –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏
- Collections.Counter –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ —á–∞—Å—Ç–æ—Ç

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [`task2/main.py`](./task2/main.py) ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
- [`task2/ngrams.py`](./task2/ngrams.py) ‚Äî –º–æ–¥—É–ª—å N-–≥—Ä–∞–º–º
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
  - `ngrams_1.csv` ‚Äî —á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å 1-–≥—Ä–∞–º–º
  - `ngrams_2.csv` ‚Äî —á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å 2-–≥—Ä–∞–º–º
  - `ngrams_3.csv` ‚Äî —á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å 3-–≥—Ä–∞–º–º

---

### –ó–∞–¥–∞—á–∞ a: –ü–æ–∏—Å–∫ –∏ —Ä–∞—Å—á—ë—Ç —Å—Ä–µ–¥–Ω–µ–π –∑–∞—Ä–ø–ª–∞—Ç—ã

**–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π, –∑–∞—Ç–µ–º:
1. –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ HeadHunter API
2. –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
3. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞—Ä–ø–ª–∞—Ç–∞—Ö –∏–∑ –∫–∞–∂–¥–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏
4. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –≤ —Ä—É–±–ª–∏ —Å —É—á—ë—Ç–æ–º –≤–∞–ª—é—Ç—ã
5. –í—ã—á–∏—Å–ª—è–µ—Ç —Å—Ä–µ–¥–Ω—é—é –∑–∞—Ä–ø–ª–∞—Ç—É

**API-–∑–∞–ø—Ä–æ—Å—ã:**

```python
HH_URL = "https://api.hh.ru/vacancies"

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
params = {
    "text": "Python",           # –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ
    "per_page": 100,            # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    "page": 0                   # –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
}

response = requests.get(HH_URL, params=params, timeout=10)
data = response.json()
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª—é—Ç:**

```python
CBR_URL = "https://www.cbr.ru/scripts/XML_daily.asp"

def get_cbr_rates():
    """–ü–æ–ª—É—á–∞–µ—Ç –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç —Å —Å–∞–π—Ç–∞ –¶–ë –†–§"""
    resp = requests.get(CBR_URL, timeout=10)
    resp.encoding = "windows-1251"
    root = ET.fromstring(resp.text)
    rates = {"RUB": 1.0, "RUR": 1.0}
    for valute in root.findall("Valute"):
        code = valute.find("CharCode").text
        nominal = int(valute.find("Nominal").text)
        value = float(valute.find("Value").text.replace(",", "."))
        rates[code] = value / nominal
    return rates

def convert_to_rub(amount, currency, rates):
    """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Å—É–º–º—É –≤ —Ä—É–±–ª–∏"""
    if currency is None or currency not in rates:
        return None
    return amount * rates[currency]
```

**–õ–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∑–∞—Ä–ø–ª–∞—Ç—ã:**

```python
def extract_salary_rub(salary_obj, rates):
    """–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∑–∞—Ä–ø–ª–∞—Ç—É –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ —Ä—É–±–ª–∏"""
    if not salary_obj:
        return None
    
    s_from = salary_obj.get("from")
    s_to = salary_obj.get("to")
    cur = salary_obj.get("currency")
    
    # –ë–µ—Ä—ë–º —Å—Ä–µ–¥–Ω–µ–µ, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –¥–∏–∞–ø–∞–∑–æ–Ω
    if s_from is not None and s_to is not None:
        value = (s_from + s_to) / 2.0
    elif s_from is not None:
        value = s_from
    elif s_to is not None:
        value = s_to
    else:
        return None
    
    return convert_to_rub(value, cur, rates)
```

**–ü—Ä–∏–º–µ—Ä—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π:**

```
–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏: Python
–ò—â—É –≤–∞–∫–∞–Ω—Å–∏–∏: Python ...
–í—Å–µ–≥–æ –≤–∞–∫–∞–Ω—Å–∏–π –Ω–∞–π–¥–µ–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É: 15234

–°—Ä–µ–¥–Ω—è—è –∑–∞—Ä–ø–ª–∞—Ç–∞ –ø–æ –≤–∞–∫–∞–Ω—Å–∏–∏ 'Python': 185,432.50 RUB
–£—á—Ç–µ–Ω–æ –≤–∞–∫–∞–Ω—Å–∏–π —Å –∑–∞—Ä–ø–ª–∞—Ç–æ–π: 3421
```

---

### –ó–∞–¥–∞—á–∞ b: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç –ø–æ –≥–æ—Ä–æ–¥–∞–º

**–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å—Ä–µ–¥–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç—ã Python-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –ª–æ–∫–∞—Ü–∏—è—Ö:
- –ü–µ—Ä–º—å
- –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥
- –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥
- –ú–æ—Å–∫–≤–∞
- –†–æ—Å—Å–∏—è (–≤ —Ü–µ–ª–æ–º)

**ID –≥–æ—Ä–æ–¥–æ–≤ –≤ HeadHunter API:**

```python
CITY_IDS = {
    "–ú–æ—Å–∫–≤–∞": 1,
    "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥": 2,
    "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥": 66,
    "–ü–µ—Ä–º—å": 69,
    "–†–æ—Å—Å–∏—è": 113
}
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

```python
def task_b(rates):
    print("\n–°—Ä–µ–¥–Ω—è—è –∑–∞—Ä–ø–ª–∞—Ç–∞ Python-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø–æ –≥–æ—Ä–æ–¥–∞–º:")
    for city, area_id in CITY_IDS.items():
        vacs, _ = fetch_all_vacancies(
            "Python", 
            per_page=100, 
            max_pages=None, 
            area=area_id
        )
        salaries = [
            extract_salary_rub(v.get("salary"), rates) 
            for v in vacs 
            if extract_salary_rub(v.get("salary"), rates) is not None
        ]
        avg = compute_average_from_list(salaries)
        if avg is None:
            print(f"{city}: –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö")
        else:
            print(f"{city}: {avg:,.2f} RUB (—É—á—Ç–µ–Ω–æ {len(salaries)} –≤–∞–∫–∞–Ω—Å–∏–π)")
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
–°—Ä–µ–¥–Ω—è—è –∑–∞—Ä–ø–ª–∞—Ç–∞ Python-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø–æ –≥–æ—Ä–æ–¥–∞–º:
–ü–µ—Ä–º—å: 125,450.00 RUB (—É—á—Ç–µ–Ω–æ 123 –≤–∞–∫–∞–Ω—Å–∏–π)
–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥: 142,380.50 RUB (—É—á—Ç–µ–Ω–æ 187 –≤–∞–∫–∞–Ω—Å–∏–π)
–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥: 178,920.75 RUB (—É—á—Ç–µ–Ω–æ 543 –≤–∞–∫–∞–Ω—Å–∏–π)
–ú–æ—Å–∫–≤–∞: 245,680.25 RUB (—É—á—Ç–µ–Ω–æ 892 –≤–∞–∫–∞–Ω—Å–∏–π)
–†–æ—Å—Å–∏—è: 185,432.50 RUB (—É—á—Ç–µ–Ω–æ 3421 –≤–∞–∫–∞–Ω—Å–∏–π)
```

---

### –ó–∞–¥–∞—á–∞ c: N-–≥—Ä–∞–º–º—ã –∏ —á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å

**–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –Ω–∞–≤—ã–∫–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ –æ–ø–∏—Å–∞–Ω–∏–π –≤–∞–∫–∞–Ω—Å–∏–π, —Å—Ç—Ä–æ–∏—Ç —á–∞—Å—Ç–æ—Ç–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏ –¥–ª—è 1-, 2- –∏ 3-–≥—Ä–∞–º–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ CSV-—Ñ–∞–π–ª—ã.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è N-–≥—Ä–∞–º–º:**

1. **–û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞:**
   - –£–¥–∞–ª–µ–Ω–∏–µ HTML-—Ä–∞–∑–º–µ—Ç–∫–∏
   - –£–¥–∞–ª–µ–Ω–∏–µ –Ω—É–º–µ—Ä–∞—Ü–∏–∏ –∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
   - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–µ–ª–æ–≤

2. **–¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è:**
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ —Å –ø–æ–º–æ—â—å—é —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
   - –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É

3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
   - –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–æ–ø-—Å–ª–æ–≤ (—Ä—É—Å—Å–∫–∏–µ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ)
   - –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤

4. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ N-–≥—Ä–∞–º–º:**
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 1-, 2- –∏ 3-–≥—Ä–∞–º–º
   - –ü–æ–¥—Å—á—ë—Ç —á–∞—Å—Ç–æ—Ç —Å –ø–æ–º–æ—â—å—é Counter

**–ö–æ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è N-–≥—Ä–∞–º–º:**

```python
def extract_ngrams_from_snippets(vacancies, stopwords=None, top_k=None):
    """–ò–∑–≤–ª–µ–∫–∞–µ—Ç N-–≥—Ä–∞–º–º—ã –∏–∑ –æ–ø–∏—Å–∞–Ω–∏–π –≤–∞–∫–∞–Ω—Å–∏–π"""
    stop = set(stopwords) if stopwords else DEFAULT_STOPWORDS
    counters = {1: Counter(), 2: Counter(), 3: Counter()}

    for v in vacancies:
        snippet = v.get("snippet") or {}
        requirement = snippet.get("requirement") or ""
        responsibility = snippet.get("responsibility") or ""
        text = clean_text(requirement + " " + responsibility)
        tokens = [t for t in tokenize(text) if t not in stop and len(t) > 1]
        
        for n in (1, 2, 3):
            counters[n].update(build_ngrams(tokens, n))

    if top_k is None:
        return {n: list(counters[n].items()) for n in counters}
    return {n: counters[n].most_common(top_k) for n in counters}
```

**–ü—Ä–∏–º–µ—Ä—ã N-–≥—Ä–∞–º–º –∏ —á–∞—Å—Ç–æ—Ç–Ω–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è:**

**–¢–æ–ø-10 1-–≥—Ä–∞–º–º:**
```
python: 342
django: 187
sql: 156
postgresql: 134
linux: 128
git: 119
api: 115
docker: 98
rest: 87
redis: 76
```

**–¢–æ–ø-10 2-–≥—Ä–∞–º–º:**
```
python django: 145
—Ä–∞–±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–µ: 98
–æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã: 87
–∑–Ω–∞–Ω–∏–µ python: 76
rest api: 65
–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: 54
unit test: 43
—Ä–∞–±–æ—Ç–∞ –ø—Ä–æ–µ–∫—Ç–æ–º: 38
git –æ–ø—ã—Ç: 34
docker kubernetes: 29
```

**–¢–æ–ø-10 3-–≥—Ä–∞–º–º:**
```
python django flask: 45
–æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã python: 38
–∑–Ω–∞–Ω–∏–µ python django: 32
—Ä–∞–±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: 28
—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: 24
```

**–§–æ—Ä–º–∞—Ç CSV-—Ñ–∞–π–ª–æ–≤:**

```csv
ngram,count
python,342
django,187
sql,156
...
```

–§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
- [`ngrams_1.csv`](./ngrams_1.csv)
- [`ngrams_2.csv`](./ngrams_2.csv)
- [`ngrams_3.csv`](./ngrams_3.csv)

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python:**
- `requests` ‚Äî HTTP-–∑–∞–ø—Ä–æ—Å—ã
- `beautifulsoup4` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ HTML
- `xml.etree.ElementTree` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ XML
- `collections.Counter` ‚Äî –ø–æ–¥—Å—á—ë—Ç —á–∞—Å—Ç–æ—Ç
- `re` ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- `csv` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å CSV

---

## üìÑ –ó–∞–¥–∞–Ω–∏–µ 3: OpenXML –¥–æ–∫—É–º–µ–Ω—Ç—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Word-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∞ OpenXML (.docx) –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞. –î–æ–∫—É–º–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —à–∞–±–ª–æ–Ω —Å –ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–º–∏ –ø—É—Å—Ç—ã–º–∏ –ø–æ–ª—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏.

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–†–∞—Å–ø–∞–∫–æ–≤–∫–∞ docx-—Ñ–∞–π–ª–∞**
   - –î–æ–∫—É–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∞ OpenXML —è–≤–ª—è—é—Ç—Å—è ZIP-–∞—Ä—Ö–∏–≤–∞–º–∏
   - –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é

2. **–ü–æ–∏—Å–∫ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è XML**
   - –ü–æ–∏—Å–∫ –Ω—É–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ `word/document.xml`
   - –†–∞–±–æ—Ç–∞ —Å XML-—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —á–µ—Ä–µ–∑ lxml

3. **–ü–æ–∏—Å–∫ —è–∫–æ—Ä–µ–π –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π**
   - –ü–æ–∏—Å–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —è–∫–æ—Ä–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–í—ã–¥–∞–Ω–æ —Å—Ç—É–¥–µ–Ω—Ç—É")
   - –ü–æ–∏—Å–∫ –ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã—Ö –ø—É—Å—Ç—ã—Ö run-—ç–ª–µ–º–µ–Ω—Ç–æ–≤
   - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

4. **–£–ø–∞–∫–æ–≤–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ docx**
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ docx-—Ñ–∞–π–ª–∞ –∏–∑ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [`task3/fill_openxml_by_context.py`](./task3/fill_openxml_by_context.py) ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `zipfile` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Ä—Ö–∏–≤–∞–º–∏
- `lxml` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ XML
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã OpenXML —Ñ–æ—Ä–º–∞—Ç–∞

---

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

**1. –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ docx:**

```python
def unzip_docx(path, outdir):
    """–†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç docx-—Ñ–∞–π–ª –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é"""
    if os.path.exists(outdir):
        shutil.rmtree(outdir)
    os.makedirs(outdir)
    with zipfile.ZipFile(path, 'r') as z:
        z.extractall(outdir)
```

**2. –ü–æ–∏—Å–∫ XML-run-—ç–ª–µ–º–µ–Ω—Ç–æ–≤:**

–î–æ–∫—É–º–µ–Ω—Ç Word —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤ (`<w:p>`), –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç runs (`<w:r>`). –ö–∞–∂–¥—ã–π run –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–µ–∫—Å—Ç (`<w:t>`) –∏ —Å–≤–æ–π—Å—Ç–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`<w:rPr>`).

```python
def collect_runs(tree, ns):
    """–°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ run-—ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞"""
    return tree.findall('.//w:r', namespaces=ns)
```

**3. –†–∞–±–æ—Ç–∞ —Å –ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–º–∏ –ø–æ–ª—è–º–∏:**

–ü–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–µ –ø—É—Å—Ç—ã–µ –ø–æ–ª—è ‚Äî —ç—Ç–æ run-—ç–ª–µ–º–µ–Ω—Ç—ã —Å:
- –°–≤–æ–π—Å—Ç–≤–æ–º –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è (`<w:u>`) –≤ `w:rPr`
- –ü—É—Å—Ç—ã–º –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º —Ç–µ–∫—Å—Ç–æ–º (`<w:t>`)

```python
def is_underlined_empty_run(r, ns):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ run –ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–º –∏ –ø—É—Å—Ç—ã–º"""
    rPr = r.find('w:rPr', namespaces=ns)
    has_u = False
    if rPr is not None:
        u = rPr.find('w:u', namespaces=ns)
        if u is not None:
            has_u = True
    t = r.find('w:t', namespaces=ns)
    if has_u and (t is None or (t.text is None or t.text.strip() == "")):
        return True
    return False
```

**4. –ü–æ–∏—Å–∫ —è–∫–æ—Ä–µ–π –∏ —Å–≤—è–∑–∫–∞ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º:**

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∏—â–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —è–∫–æ—Ä—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–í—ã–¥–∞–Ω–æ —Å—Ç—É–¥–µ–Ω—Ç—É", "–≥—Ä—É–ø–ø—ã", "–°—Ä–æ–∫ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏–∫–∏") –∏ –Ω–∞—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞ –Ω–∏–º–∏ –ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–µ –ø–æ–ª—è.

```python
def find_run_index_with_text(runs, needle, ns):
    """–ù–∞—Ö–æ–¥–∏—Ç –∏–Ω–¥–µ–∫—Å run-—ç–ª–µ–º–µ–Ω—Ç–∞ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º"""
    for i, r in enumerate(runs):
        if run_contains_text(r, needle, ns):
            return i
    return -1

def find_next_underlined_index(runs, start_idx, ns):
    """–ù–∞—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–π –ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–π –ø—É—Å—Ç–æ–π run –ø–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞"""
    for i in range(start_idx + 1, len(runs)):
        if is_underlined_empty_run(runs[i], ns):
            return i
    return -1
```

**5. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

–ü—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤–∞–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–≤–∫–ª—é—á–∞—è –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ), –ø–æ—ç—Ç–æ–º—É —Å–Ω–∞—á–∞–ª–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è `w:rPr`, –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç.

```python
def set_run_text_preserve_rPr(r, text, ns):
    """–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤ run, —Å–æ—Ö—Ä–∞–Ω—è—è —Å–≤–æ–π—Å—Ç–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    rPr = r.find('w:rPr', namespaces=ns)
    
    # –£–¥–∞–ª—è–µ–º –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
    for child in list(r):
        r.remove(child)
    
    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–≤–æ–π—Å—Ç–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    if rPr is not None:
        r.append(rPr)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç
    t = etree.Element("{%s}t" % ns['w'])
    if text.startswith(" ") or text.endswith(" "):
        t.set("{http://www.w3.org/XML/1998/namespace}space", "preserve")
    t.text = text
    r.append(t)
```

**6. –†–∞–±–æ—Ç–∞ —Å –≤—ã–±–æ—Ä–æ–º (—Å–ª–µ—à-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏):**

–î–ª—è –ø–æ–ª–µ–π —Å –≤—ã–±–æ—Ä–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, "09.03.04 / 38.03.05") –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—É—é —á–∞—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞.

```python
def choose_side_of_slash_in_run(r, keep_left=True, ns=None):
    """–í—ã–±–∏—Ä–∞–µ—Ç –ª–µ–≤—É—é –∏–ª–∏ –ø—Ä–∞–≤—É—é —á–∞—Å—Ç—å —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Å–ª–µ—à–µ–º —Ç–µ–∫—Å—Ç–∞"""
    t = r.find('w:t', namespaces=ns)
    if t is None or t.text is None:
        return
    parts = t.text.split('/')
    if len(parts) < 2:
        return
    t.text = parts[0].strip() if keep_left else parts[1].strip()
```

**7. –£–ø–∞–∫–æ–≤–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ docx:**

```python
def zip_dir_to_docx(dirpath, outpath):
    """–£–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –æ–±—Ä–∞—Ç–Ω–æ –≤ docx-—Ñ–∞–π–ª"""
    with zipfile.ZipFile(outpath, 'w', zipfile.ZIP_DEFLATED) as z:
        for folder, _, files in os.walk(dirpath):
            for f in files:
                file_path = os.path.join(folder, f)
                archive_name = os.path.relpath(file_path, dirpath)
                z.write(file_path, archive_name)
```

---

### –ó–∞–ø–æ–ª–Ω—è–µ–º—ã–µ –ø–æ–ª—è

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞:

1. **–ö—É—Ä—Å —Å—Ç—É–¥–µ–Ω—Ç–∞** ‚Äî –ø–æ–ª–µ –ø–æ—Å–ª–µ —Ç–µ–∫—Å—Ç–∞ "–í—ã–¥–∞–Ω–æ —Å—Ç—É–¥–µ–Ω—Ç—É"
2. **–ì—Ä—É–ø–ø–∞** ‚Äî –ø–æ–ª–µ –ø–æ—Å–ª–µ —Ç–µ–∫—Å—Ç–∞ "–≥—Ä—É–ø–ø—ã"
3. **–§–ò–û —Å—Ç—É–¥–µ–Ω—Ç–∞** ‚Äî –ø–æ–¥—á—ë—Ä–∫–Ω—É—Ç—ã–µ –ø–æ–ª—è –ø–µ—Ä–µ–¥ —Ç–µ–∫—Å—Ç–æ–º "(—Ñ–∞–º–∏–ª–∏—è, –∏–º—è, –æ—Ç—á–µ—Å—Ç–≤–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏)"
4. **–°—Ä–æ–∫ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏–∫–∏** ‚Äî –ø–æ–ª–µ —Å –¥–∞—Ç–∞–º–∏ –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è
5. **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏** ‚Äî –≤—ã–±–æ—Ä –º–µ–∂–¥—É "09.03.04" –∏ "38.03.05"
6. **–¢–∏–ø –ø—Ä–∞–∫—Ç–∏–∫–∏** ‚Äî –≤—ã–±–æ—Ä –º–µ–∂–¥—É "–ù–∞—É—á–Ω–æ-–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è" –∏ "–ü—Ä–æ–µ–∫—Ç–Ω–∞—è"

**–ü—Ä–∏–º–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞:**

```python
values = {
    'student_name': '–ë–µ–ª—è–µ–≤–∞ –ï–ª–∏–∑–∞–≤—Ç–µ–∞ –î–º–∏—Ç—Ä–∏–µ–≤–Ω–∞',
    'course': '4',
    'group': '–†–ò–°-22-3',
    'date_from': '11.11.2022',
    'date_to': '11.12.2025',
    'direction_choice': '09.03.04',
    'practice_type_choice': '–ù–∞—É—á–Ω–æ-–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è'
}
```

